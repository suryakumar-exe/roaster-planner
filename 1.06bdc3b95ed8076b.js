"use strict";(self.webpackChunkroaster_planner=self.webpackChunkroaster_planner||[]).push([[1],{8001:(f,d,i)=>{i.r(d),i.d(d,{DatabaseManagementComponent:()=>h});var c=i(467),l=i(177),b=i(4341),t=i(4438),m=i(3286),u=i(5794);function v(s,F){if(1&s&&(t.j41(0,"div",34)(1,"div",52)(2,"div",53)(3,"div",54),t.EFF(4),t.k0s(),t.j41(5,"small",17),t.EFF(6,"Users"),t.k0s()()(),t.j41(7,"div",52)(8,"div",53)(9,"div",55),t.EFF(10),t.k0s(),t.j41(11,"small",17),t.EFF(12,"Rosters"),t.k0s()()(),t.j41(13,"div",52)(14,"div",53)(15,"div",56),t.EFF(16),t.k0s(),t.j41(17,"small",17),t.EFF(18,"Teams"),t.k0s()()(),t.j41(19,"div",52)(20,"div",53)(21,"div",57),t.EFF(22),t.k0s(),t.j41(23,"small",17),t.EFF(24,"Holidays"),t.k0s()()(),t.j41(25,"div",52)(26,"div",53)(27,"div",58),t.EFF(28),t.k0s(),t.j41(29,"small",17),t.EFF(30,"Leaves"),t.k0s()()(),t.j41(31,"div",52)(32,"div",53)(33,"div",59),t.EFF(34),t.k0s(),t.j41(35,"small",17),t.EFF(36,"Notifications"),t.k0s()()()()),2&s){const e=t.XpG();t.R7$(4),t.JRh(e.databaseStats.totalUsers),t.R7$(6),t.JRh(e.databaseStats.totalRosters),t.R7$(6),t.JRh(e.databaseStats.totalTeams),t.R7$(6),t.JRh(e.databaseStats.totalHolidays),t.R7$(6),t.JRh(e.databaseStats.totalLeaves),t.R7$(6),t.JRh(e.databaseStats.totalNotifications)}}function p(s,F){if(1&s&&(t.j41(0,"div",60)(1,"div",3)(2,"div",61)(3,"small"),t.nrm(4,"i",62),t.EFF(5),t.nI1(6,"date"),t.k0s()()()()),2&s){const e=t.XpG();t.R7$(5),t.SpI("Last Updated: ",t.i5U(6,1,e.databaseStats.lastUpdated,"medium"),"")}}let h=(()=>{class s{constructor(e,a){this.jsonDatabaseService=e,this.toastr=a,this.databaseStats=null,this.selectedFile=null,this.databaseStructure=null}ngOnInit(){this.loadDatabaseStats()}loadDatabaseStats(){this.databaseStats=this.jsonDatabaseService.getDatabaseStats()}refreshStats(){this.loadDatabaseStats(),this.toastr.success("Database statistics refreshed","Success")}exportDatabase(){try{this.jsonDatabaseService.exportToJsonFile(),this.toastr.success("Database exported successfully","Success")}catch(e){console.error("Error exporting database:",e),this.toastr.error("Failed to export database","Error")}}onFileSelected(e){const a=e.target.files[0];a&&"application/json"===a.type?(this.selectedFile=a,this.toastr.info(`File selected: ${a.name}`,"File Selected")):(this.toastr.error("Please select a valid JSON file","Error"),this.selectedFile=null)}importDatabase(){var e=this;return(0,c.A)(function*(){if(e.selectedFile)try{yield e.jsonDatabaseService.importFromJsonFile(e.selectedFile),e.toastr.success("Database imported successfully","Success"),e.loadDatabaseStats(),e.selectedFile=null;const a=document.querySelector('input[type="file"]');a&&(a.value="")}catch(a){console.error("Error importing database:",a),e.toastr.error("Failed to import database. Please check the file format.","Error")}else e.toastr.error("Please select a file first","Error")})()}viewDatabaseStructure(){try{const e=this.jsonDatabaseService.exportData();this.databaseStructure=e,new window.bootstrap.Modal(document.getElementById("databaseStructureModal")).show()}catch(e){console.error("Error viewing database structure:",e),this.toastr.error("Failed to load database structure","Error")}}clearDatabase(){if(confirm("Are you sure you want to clear all data? This action cannot be undone."))try{this.jsonDatabaseService.clearAllData(),this.toastr.success("All data cleared successfully","Success"),this.loadDatabaseStats()}catch(e){console.error("Error clearing database:",e),this.toastr.error("Failed to clear database","Error")}}static{this.\u0275fac=function(a){return new(a||s)(t.rXU(m.d),t.rXU(u.tw))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-database-management"]],standalone:!0,features:[t.aNF],decls:95,vars:6,consts:[["fileInput",""],[1,"container-fluid"],[1,"row","mb-4"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-muted","mb-0"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"bi","bi-graph-up","me-2"],[1,"card-body"],["class","row",4,"ngIf"],["class","row mt-3",4,"ngIf"],[1,"col-md-6"],[1,"card","border-success"],[1,"card-header","bg-success","text-white"],[1,"bi","bi-download","me-2"],[1,"text-muted"],[1,"d-grid"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-file-earmark-arrow-down","me-2"],[1,"mt-3"],[1,"bi","bi-info-circle","me-1"],[1,"card","border-primary"],[1,"card-header","bg-primary","text-white"],[1,"bi","bi-upload","me-2"],[1,"mb-3"],["type","file","accept",".json",1,"form-control",3,"change"],[1,"btn","btn-primary",3,"click","disabled"],[1,"bi","bi-file-earmark-arrow-up","me-2"],[1,"bi","bi-exclamation-triangle","me-1"],[1,"card","border-warning"],[1,"card-header","bg-warning","text-dark"],[1,"bi","bi-gear","me-2"],[1,"row"],[1,"col-md-4"],[1,"btn","btn-outline-info",3,"click"],[1,"bi","bi-arrow-clockwise","me-2"],[1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-eye","me-2"],[1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash","me-2"],["id","databaseStructureModal","tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal",1,"btn-close"],[1,"modal-body"],[1,"bg-light","p-3","rounded"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"col-md-2","col-sm-4","col-6","mb-3"],[1,"text-center"],[1,"h4","text-primary"],[1,"h4","text-success"],[1,"h4","text-info"],[1,"h4","text-warning"],[1,"h4","text-danger"],[1,"h4","text-secondary"],[1,"row","mt-3"],[1,"alert","alert-info"],[1,"bi","bi-clock","me-1"]],template:function(a,r){if(1&a){const o=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div")(5,"h2"),t.EFF(6,"Database Management"),t.k0s(),t.j41(7,"p",5),t.EFF(8,"Export and import your roster planner data as JSON files"),t.k0s()()()()(),t.j41(9,"div",2)(10,"div",3)(11,"div",6)(12,"div",7)(13,"h5",8),t.nrm(14,"i",9),t.EFF(15,"Database Statistics"),t.k0s()(),t.j41(16,"div",10),t.DNE(17,v,37,6,"div",11)(18,p,7,4,"div",12),t.k0s()()()(),t.j41(19,"div",2)(20,"div",13)(21,"div",14)(22,"div",15)(23,"h5",8),t.nrm(24,"i",16),t.EFF(25,"Export Database"),t.k0s()(),t.j41(26,"div",10)(27,"p",17),t.EFF(28,"Export all your data to a JSON file for backup or migration purposes."),t.k0s(),t.j41(29,"div",18)(30,"button",19),t.bIt("click",function(){return t.eBV(o),t.Njj(r.exportDatabase())}),t.nrm(31,"i",20),t.EFF(32,"Export to JSON File "),t.k0s()(),t.j41(33,"div",21)(34,"small",17),t.nrm(35,"i",22),t.EFF(36," This will download a JSON file containing all users, rosters, teams, holidays, leaves, and notifications. "),t.k0s()()()()(),t.j41(37,"div",13)(38,"div",23)(39,"div",24)(40,"h5",8),t.nrm(41,"i",25),t.EFF(42,"Import Database"),t.k0s()(),t.j41(43,"div",10)(44,"p",17),t.EFF(45,"Import data from a previously exported JSON file."),t.k0s(),t.j41(46,"div",26)(47,"input",27,0),t.bIt("change",function(_){return t.eBV(o),t.Njj(r.onFileSelected(_))}),t.k0s()(),t.j41(49,"div",18)(50,"button",28),t.bIt("click",function(){return t.eBV(o),t.Njj(r.importDatabase())}),t.nrm(51,"i",29),t.EFF(52,"Import from JSON File "),t.k0s()(),t.j41(53,"div",21)(54,"small",17),t.nrm(55,"i",30),t.EFF(56," Warning: This will replace all existing data with the imported data. "),t.k0s()()()()()(),t.j41(57,"div",2)(58,"div",3)(59,"div",31)(60,"div",32)(61,"h5",8),t.nrm(62,"i",33),t.EFF(63,"Database Actions"),t.k0s()(),t.j41(64,"div",10)(65,"div",34)(66,"div",35)(67,"div",18)(68,"button",36),t.bIt("click",function(){return t.eBV(o),t.Njj(r.refreshStats())}),t.nrm(69,"i",37),t.EFF(70,"Refresh Statistics "),t.k0s()()(),t.j41(71,"div",35)(72,"div",18)(73,"button",38),t.bIt("click",function(){return t.eBV(o),t.Njj(r.viewDatabaseStructure())}),t.nrm(74,"i",39),t.EFF(75,"View Database Structure "),t.k0s()()(),t.j41(76,"div",35)(77,"div",18)(78,"button",40),t.bIt("click",function(){return t.eBV(o),t.Njj(r.clearDatabase())}),t.nrm(79,"i",41),t.EFF(80,"Clear All Data "),t.k0s()()()()()()()(),t.j41(81,"div",42)(82,"div",43)(83,"div",44)(84,"div",45)(85,"h5",46),t.EFF(86,"Database Structure"),t.k0s(),t.nrm(87,"button",47),t.k0s(),t.j41(88,"div",48)(89,"pre",49),t.EFF(90),t.nI1(91,"json"),t.k0s()(),t.j41(92,"div",50)(93,"button",51),t.EFF(94,"Close"),t.k0s()()()()()()}2&a&&(t.R7$(17),t.Y8G("ngIf",r.databaseStats),t.R7$(),t.Y8G("ngIf",r.databaseStats),t.R7$(32),t.Y8G("disabled",!r.selectedFile),t.R7$(40),t.JRh(t.bMT(91,4,r.databaseStructure)))},dependencies:[l.MD,l.bT,l.TG,l.vh,b.YN],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013}.card-header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.125)}pre[_ngcontent-%COMP%]{font-size:.875rem;max-height:400px;overflow-y:auto}"]})}}return s})()}}]);