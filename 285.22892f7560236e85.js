"use strict";(self.webpackChunkroaster_planner=self.webpackChunkroaster_planner||[]).push([[285],{5285:(k,c,n)=>{n.r(c),n.d(c,{ComplianceReportComponent:()=>R});var o=n(177),e=n(4438),v=n(5092),h=n(5602),m=n(7474),p=n(9478),F=n(4796);function u(a,l){if(1&a&&(e.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"h5",9),e.EFF(5,"Leave Request Statistics"),e.k0s()(),e.j41(6,"div",10)(7,"div",11)(8,"div",12)(9,"div",13)(10,"h4",14),e.EFF(11),e.k0s(),e.j41(12,"small",3),e.EFF(13,"Total Leaves"),e.k0s()()(),e.j41(14,"div",12)(15,"div",13)(16,"h4",15),e.EFF(17),e.k0s(),e.j41(18,"small",3),e.EFF(19,"Approved"),e.k0s()()(),e.j41(20,"div",12)(21,"h4",16),e.EFF(22),e.k0s(),e.j41(23,"small",3),e.EFF(24,"Pending"),e.k0s()()()()()(),e.j41(25,"div",6)(26,"div",7)(27,"div",8)(28,"h5",9),e.EFF(29,"Work Pattern Analysis"),e.k0s()(),e.j41(30,"div",10)(31,"div",11)(32,"div",12)(33,"div",13)(34,"h4",14),e.EFF(35),e.k0s(),e.j41(36,"small",3),e.EFF(37,"WFO Days"),e.k0s()()(),e.j41(38,"div",12)(39,"div",13)(40,"h4",15),e.EFF(41),e.k0s(),e.j41(42,"small",3),e.EFF(43,"WFH Days"),e.k0s()()(),e.j41(44,"div",12)(45,"h4",17),e.EFF(46),e.k0s(),e.j41(47,"small",3),e.EFF(48,"Compliance"),e.k0s()()()()()()()),2&a){const t=e.XpG();e.R7$(11),e.JRh(t.leaveStats.total),e.R7$(6),e.JRh(t.leaveStats.approved),e.R7$(5),e.JRh(t.leaveStats.pending),e.R7$(13),e.JRh(t.workPatternStats.wfoDays),e.R7$(6),e.JRh(t.workPatternStats.wfhDays),e.R7$(5),e.SpI("",t.workPatternStats.complianceRate,"%")}}function g(a,l){if(1&a&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"div",45),e.nrm(9,"div",46),e.k0s(),e.j41(10,"small"),e.EFF(11),e.k0s()()()),2&a){const t=l.$implicit;e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.totalMembers),e.R7$(2),e.JRh(t.compliantMembers),e.R7$(3),e.xc7("width",t.complianceRate,"%"),e.R7$(2),e.SpI("",t.complianceRate,"%")}}function E(a,l){if(1&a&&(e.j41(0,"div",5)(1,"div",18)(2,"div",19)(3,"div",10)(4,"div",20)(5,"div")(6,"h4",21),e.EFF(7),e.k0s(),e.j41(8,"small"),e.EFF(9,"Total Employees"),e.k0s()(),e.nrm(10,"i",22),e.k0s()()()(),e.j41(11,"div",18)(12,"div",23)(13,"div",10)(14,"div",20)(15,"div")(16,"h4",21),e.EFF(17),e.k0s(),e.j41(18,"small"),e.EFF(19,"Compliant"),e.k0s()(),e.nrm(20,"i",24),e.k0s()()()(),e.j41(21,"div",18)(22,"div",25)(23,"div",10)(24,"div",20)(25,"div")(26,"h4",21),e.EFF(27),e.k0s(),e.j41(28,"small"),e.EFF(29,"Pending Approval"),e.k0s()(),e.nrm(30,"i",26),e.k0s()()()(),e.j41(31,"div",18)(32,"div",27)(33,"div",10)(34,"div",20)(35,"div")(36,"h4",21),e.EFF(37),e.k0s(),e.j41(38,"small"),e.EFF(39,"Compliance Rate"),e.k0s()(),e.nrm(40,"i",28),e.k0s()()()(),e.j41(41,"div",29)(42,"div",7)(43,"div",8)(44,"h5",9),e.EFF(45,"Team Compliance Overview"),e.k0s()(),e.j41(46,"div",10)(47,"div",30)(48,"table",31)(49,"thead")(50,"tr")(51,"th"),e.EFF(52,"Team"),e.k0s(),e.j41(53,"th"),e.EFF(54,"Members"),e.k0s(),e.j41(55,"th"),e.EFF(56,"Compliant"),e.k0s(),e.j41(57,"th"),e.EFF(58,"Progress"),e.k0s()()(),e.j41(59,"tbody"),e.DNE(60,g,12,6,"tr",32),e.k0s()()()()()(),e.j41(61,"div",33)(62,"div",7)(63,"div",8)(64,"h5",9),e.EFF(65,"Leave Statistics"),e.k0s()(),e.j41(66,"div",10)(67,"div",34)(68,"div",20)(69,"span"),e.EFF(70,"Total Requests"),e.k0s(),e.j41(71,"span",35),e.EFF(72),e.k0s()()(),e.j41(73,"div",34)(74,"div",20)(75,"span"),e.EFF(76,"Approved"),e.k0s(),e.j41(77,"span",36),e.EFF(78),e.k0s()()(),e.j41(79,"div",34)(80,"div",20)(81,"span"),e.EFF(82,"Pending"),e.k0s(),e.j41(83,"span",37),e.EFF(84),e.k0s()()(),e.j41(85,"div",34)(86,"div",20)(87,"span"),e.EFF(88,"Rejected"),e.k0s(),e.j41(89,"span",38),e.EFF(90),e.k0s()()()()()(),e.j41(91,"div",39)(92,"div",7)(93,"div",8)(94,"h5",9),e.EFF(95,"Work Pattern Analysis"),e.k0s()(),e.j41(96,"div",10)(97,"div",5)(98,"div",40)(99,"h4",41),e.EFF(100),e.k0s(),e.j41(101,"p",3),e.EFF(102,"Average WFO Days"),e.k0s()(),e.j41(103,"div",40)(104,"h4",42),e.EFF(105),e.k0s(),e.j41(106,"p",3),e.EFF(107,"Average WFH Days"),e.k0s()(),e.j41(108,"div",40)(109,"h4",43),e.EFF(110),e.k0s(),e.j41(111,"p",3),e.EFF(112,"Average Leave Days"),e.k0s()(),e.j41(113,"div",40)(114,"h4",44),e.EFF(115),e.k0s(),e.j41(116,"p",3),e.EFF(117,"Overall Compliance"),e.k0s()()()()()()()),2&a){const t=e.XpG();e.R7$(7),e.JRh(t.summaryStats.totalEmployees),e.R7$(10),e.JRh(t.summaryStats.compliantEmployees),e.R7$(10),e.JRh(t.summaryStats.pendingApprovals),e.R7$(10),e.SpI("",t.summaryStats.complianceRate,"%"),e.R7$(23),e.Y8G("ngForOf",t.teamCompliance),e.R7$(12),e.JRh(t.leaveStats.total),e.R7$(6),e.JRh(t.leaveStats.approved),e.R7$(6),e.JRh(t.leaveStats.pending),e.R7$(6),e.JRh(t.leaveStats.rejected),e.R7$(10),e.JRh(t.workPatternStats.wfoDays),e.R7$(5),e.JRh(t.workPatternStats.wfhDays),e.R7$(5),e.JRh(t.workPatternStats.leaveDays),e.R7$(5),e.SpI("",t.workPatternStats.complianceRate,"%")}}let R=(()=>{class a{constructor(t,s,i,r,d){this.teamsService=t,this.usersService=s,this.rostersService=i,this.leavesService=r,this.authService=d,this.summary={totalUsers:0,activeTeams:0,activeRosters:0,pendingLeaves:0},this.teams=[],this.users=[],this.rosters=[],this.leaves=[],this.leaveStats={total:0,pending:0,approved:0,rejected:0},this.workPatterns={avgOfficeDays:0,avgHomeDays:0,hybridAdoption:0},this.summaryStats={totalEmployees:0,compliantEmployees:0,pendingApprovals:0,complianceRate:0},this.workPatternStats={wfoDays:0,wfhDays:0,leaveDays:0,complianceRate:0},this.teamCompliance=[]}ngOnInit(){this.loadData()}isEmployeeView(){return this.authService.isEmployee()&&!this.authService.isTeamLead()&&!this.authService.isAdmin()}loadData(){this.loadTeams(),this.loadUsers(),this.loadRosters(),this.loadLeaves()}loadTeams(){this.teamsService.getTeams().subscribe({next:t=>{this.teams=Array.isArray(t)?t:t.data||[],this.summaryStats.totalEmployees=this.teams.length}})}loadUsers(){this.usersService.getUsers().subscribe({next:t=>{this.users=Array.isArray(t)?t:t.data||[],this.summaryStats.totalEmployees=this.users.length}})}loadRosters(){this.rostersService.getRosters().subscribe({next:t=>{this.rosters=Array.isArray(t)?t:t.data||[],this.summaryStats.totalEmployees=this.rosters.length,this.calculateWorkPatterns()}})}loadLeaves(){this.leavesService.getLeaves().subscribe({next:t=>{this.leaves=Array.isArray(t)?t:t.data||[],this.calculateLeaveStats()}})}calculateLeaveStats(){this.leaveStats.total=this.leaves.length,this.leaveStats.pending=this.leaves.filter(t=>"Pending"===t.status).length,this.leaveStats.approved=this.leaves.filter(t=>"Approved"===t.status).length,this.leaveStats.rejected=this.leaves.filter(t=>"Rejected"===t.status).length,this.summaryStats.pendingApprovals=this.leaveStats.pending}calculateWorkPatterns(){if(0===this.rosters.length)return;const t=this.rosters.reduce((i,r)=>i+r.workFromOfficeDays.length,0),s=this.rosters.reduce((i,r)=>i+r.workFromHomeDays.length,0);this.workPatternStats.wfoDays=Math.round(t/this.rosters.length),this.workPatternStats.wfhDays=Math.round(s/this.rosters.length),this.workPatternStats.leaveDays=Math.round(this.leaves.length/this.users.length),this.workPatternStats.complianceRate=Math.round(this.rosters.length/this.users.length*100)}getRoleSpecificMessage(){return this.authService.isEmployee()?"View your personal leave requests and work patterns.":this.authService.isTeamLead()?"View team compliance and work patterns across your team.":this.authService.isAdmin()?"View comprehensive reports on team compliance and work patterns.":""}getTeamMemberCount(t){return this.users.filter(s=>s.teamId===t).length}getTeamRosterCount(t){return this.rosters.filter(s=>s.userId&&this.users.find(i=>i.id===s.userId)?.teamId===t).length}getComplianceRate(t){const s=this.users.filter(r=>r.teamId===t),i=this.rosters.filter(r=>r.userId&&this.users.find(d=>d.id===r.userId)?.teamId===t);return 0===s.length?0:Math.round(i.length/s.length*100)}getComplianceStatus(t){const s=this.getComplianceRate(t);return s>=80?"Excellent":s>=60?"Good":"Needs Attention"}static{this.\u0275fac=function(s){return new(s||a)(e.rXU(v.O),e.rXU(h.g),e.rXU(m.w),e.rXU(p.e),e.rXU(F.u))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-compliance-report"]],standalone:!0,features:[e.aNF],decls:9,vars:3,consts:[[1,"container-fluid"],[1,"row","mb-4"],[1,"col-12"],[1,"text-muted"],["class","row",4,"ngIf"],[1,"row"],[1,"col-lg-6","mb-4"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"row","text-center"],[1,"col-4"],[1,"border-end"],[1,"text-primary","mb-0"],[1,"text-success","mb-0"],[1,"text-warning","mb-0"],[1,"text-info","mb-0"],[1,"col-lg-3","col-md-6","mb-4"],[1,"card","bg-primary","text-white"],[1,"d-flex","justify-content-between"],[1,"mb-0"],[1,"bi","bi-people","fs-1"],[1,"card","bg-success","text-white"],[1,"bi","bi-check-circle","fs-1"],[1,"card","bg-warning","text-white"],[1,"bi","bi-clock","fs-1"],[1,"card","bg-info","text-white"],[1,"bi","bi-graph-up","fs-1"],[1,"col-lg-8","mb-4"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"col-lg-4","mb-4"],[1,"mb-3"],[1,"fw-bold"],[1,"fw-bold","text-success"],[1,"fw-bold","text-warning"],[1,"fw-bold","text-danger"],[1,"col-12","mb-4"],[1,"col-md-3","text-center"],[1,"text-primary"],[1,"text-success"],[1,"text-warning"],[1,"text-info"],[1,"progress"],[1,"progress-bar"]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e.EFF(4,"Reports & Analytics"),e.k0s(),e.j41(5,"p",3),e.EFF(6),e.k0s()()(),e.DNE(7,u,49,6,"div",4)(8,E,118,13,"div",4),e.k0s()),2&s&&(e.R7$(6),e.JRh(i.getRoleSpecificMessage()),e.R7$(),e.Y8G("ngIf",i.isEmployeeView()),e.R7$(),e.Y8G("ngIf",!i.isEmployeeView()))},dependencies:[o.MD,o.Sq,o.bT],styles:[".border-left-primary[_ngcontent-%COMP%]{border-left:.25rem solid #4e73df!important}.border-left-success[_ngcontent-%COMP%]{border-left:.25rem solid #1cc88a!important}.border-left-info[_ngcontent-%COMP%]{border-left:.25rem solid #36b9cc!important}.border-left-warning[_ngcontent-%COMP%]{border-left:.25rem solid #f6c23e!important}.text-gray-300[_ngcontent-%COMP%]{color:#dddfeb!important}.text-gray-800[_ngcontent-%COMP%]{color:#5a5c69!important}"]})}}return a})()}}]);