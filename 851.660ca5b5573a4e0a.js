"use strict";(self.webpackChunkroaster_planner=self.webpackChunkroaster_planner||[]).push([[851],{6851:(I,c,i)=>{i.r(c),i.d(c,{TeamLeadRosterComponent:()=>T});var m=i(177),e=i(4438),k=i(7474),u=i(5092),_=i(4796),v=i(5794);function p(a,r){if(1&a&&(e.j41(0,"p",19),e.EFF(1),e.k0s()),2&a){const t=e.XpG(2);e.R7$(),e.SpI("Team: ",t.currentUserTeamName,"")}}function F(a,r){if(1&a&&(e.j41(0,"span",36),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&a){const t=r.$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,t,"EEEE, MMM dd")," ")}}function h(a,r){if(1&a&&(e.j41(0,"span",37),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&a){const t=r.$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,t,"EEEE, MMM dd")," ")}}function E(a,r){if(1&a&&(e.j41(0,"span",39),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&a){const t=r.$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,t,"EEEE, MMM dd")," ")}}function f(a,r){if(1&a&&(e.j41(0,"div",21)(1,"strong"),e.EFF(2,"Leave Days:"),e.k0s(),e.j41(3,"div",23),e.DNE(4,E,3,4,"span",38),e.k0s()()),2&a){const t=e.XpG(2);e.R7$(4),e.Y8G("ngForOf",t.teamLeadRoster.leaveDays)}}function R(a,r){if(1&a&&(e.j41(0,"div")(1,"strong"),e.EFF(2,"Submitted:"),e.k0s(),e.EFF(3),e.nI1(4,"date"),e.k0s()),2&a){const t=e.XpG(2);e.R7$(3),e.SpI(" ",e.i5U(4,1,t.teamLeadRoster.submittedAt,"MMM dd, yyyy HH:mm")," ")}}function D(a,r){if(1&a&&(e.j41(0,"div")(1,"strong"),e.EFF(2,"Approved:"),e.k0s(),e.EFF(3),e.nI1(4,"date"),e.k0s()),2&a){const t=e.XpG(2);e.R7$(3),e.SpI(" ",e.i5U(4,1,t.teamLeadRoster.approvedAt,"MMM dd, yyyy HH:mm")," ")}}function b(a,r){if(1&a&&(e.j41(0,"div",10)(1,"div",18)(2,"h6"),e.EFF(3),e.k0s(),e.j41(4,"p",19),e.EFF(5),e.k0s(),e.DNE(6,p,2,1,"p",20),e.j41(7,"div",21)(8,"strong"),e.EFF(9,"Status:"),e.k0s(),e.j41(10,"span",22),e.EFF(11),e.k0s()(),e.j41(12,"div",21)(13,"strong"),e.EFF(14,"Work From Office Days:"),e.k0s(),e.j41(15,"div",23),e.DNE(16,F,3,4,"span",24),e.k0s()(),e.j41(17,"div",21)(18,"strong"),e.EFF(19,"Work From Home Days:"),e.k0s(),e.j41(20,"div",23),e.DNE(21,h,3,4,"span",25),e.k0s()(),e.DNE(22,f,5,1,"div",26),e.k0s(),e.j41(23,"div",18)(24,"div",27)(25,"div",14)(26,"h6"),e.EFF(27,"Schedule Summary"),e.k0s(),e.j41(28,"div",28)(29,"div",29)(30,"div",30)(31,"h4",31),e.EFF(32),e.k0s(),e.j41(33,"small",19),e.EFF(34,"WFO Days"),e.k0s()()(),e.j41(35,"div",29)(36,"div",30)(37,"h4",32),e.EFF(38),e.k0s(),e.j41(39,"small",19),e.EFF(40,"WFH Days"),e.k0s()()(),e.j41(41,"div",29)(42,"h4",33),e.EFF(43),e.k0s(),e.j41(44,"small",19),e.EFF(45,"Leave Days"),e.k0s()()()()(),e.j41(46,"div",34)(47,"small",19),e.DNE(48,R,5,4,"div",35)(49,D,5,4,"div",35),e.k0s()()()()),2&a){const t=e.XpG();e.R7$(3),e.SpI("Team Lead: ",t.teamLeadRoster.userName,""),e.R7$(2),e.JRh(t.teamLeadRoster.email),e.R7$(),e.Y8G("ngIf",t.currentUserTeamName),e.R7$(4),e.AVh("bg-secondary","Draft"===t.teamLeadRoster.status)("bg-warning","Submitted"===t.teamLeadRoster.status)("bg-success","Approved"===t.teamLeadRoster.status)("bg-danger","Rejected"===t.teamLeadRoster.status),e.R7$(),e.SpI(" ",t.teamLeadRoster.status," "),e.R7$(5),e.Y8G("ngForOf",t.teamLeadRoster.workFromOfficeDays),e.R7$(5),e.Y8G("ngForOf",t.teamLeadRoster.workFromHomeDays),e.R7$(),e.Y8G("ngIf",t.teamLeadRoster.leaveDays.length>0),e.R7$(10),e.JRh(t.teamLeadRoster.workFromOfficeDays.length),e.R7$(6),e.JRh(t.teamLeadRoster.workFromHomeDays.length),e.R7$(5),e.JRh(t.teamLeadRoster.leaveDays.length),e.R7$(5),e.Y8G("ngIf",t.teamLeadRoster.submittedAt),e.R7$(),e.Y8G("ngIf",t.teamLeadRoster.approvedAt)}}function L(a,r){1&a&&(e.j41(0,"div",40),e.nrm(1,"i",41),e.j41(2,"h5",34),e.EFF(3,"No Team Lead Roster Found"),e.k0s(),e.j41(4,"p"),e.EFF(5,"Your team lead hasn't submitted a roster for this week yet."),e.k0s()())}function y(a,r){1&a&&(e.j41(0,"div",42)(1,"div",43)(2,"span",44),e.EFF(3,"Loading..."),e.k0s()(),e.j41(4,"p",23),e.EFF(5,"Loading team lead roster..."),e.k0s()())}let T=(()=>{class a{constructor(t,s,n,o){this.rostersService=t,this.teamsService=s,this.authService=n,this.toastr=o,this.teamLeadRoster=null,this.weekStartDate=new Date,this.weekEndDate=new Date,this.currentUserTeamName=null,this.loading=!1,this.initializeWeek()}ngOnInit(){this.loadTeamLeadRoster()}initializeWeek(){const t=new Date,s=t.getDay(),n=t.getDate()-s+(0===s?-6:1);this.weekStartDate=new Date(t.setDate(n)),this.weekEndDate=new Date(this.weekStartDate),this.weekEndDate.setDate(this.weekStartDate.getDate()+6)}loadTeamLeadRoster(){this.loading=!0;const t=this.authService.getCurrentUser();if(!t)return this.toastr.error("User not found"),void(this.loading=!1);this.teamsService.getTeams().subscribe({next:s=>{const o=(Array.isArray(s)?s:s.data||[]).find(d=>d.id===t.teamId);if(!o)return console.log("User has no team assigned"),void(this.loading=!1);this.currentUserTeamName=o.name,console.log("User team found:",o.name);const w=this.weekStartDate.toISOString().split("T")[0];this.rostersService.getRosters().subscribe({next:d=>{const g=Array.isArray(d)?d:d.data||[];console.log("All rosters:",g),this.teamLeadRoster=g.find(l=>l.weekStartDate===w&&"TeamLead"===l.role&&l.teamId===t.teamId)||null,console.log("Found team lead roster:",this.teamLeadRoster),this.loading=!1},error:d=>{console.error("Error loading rosters:",d),this.toastr.error("Failed to load team lead roster"),this.loading=!1}})},error:s=>{console.error("Error loading teams:",s),this.toastr.error("Failed to load team information"),this.loading=!1}})}previousWeek(){const t=new Date(this.weekStartDate);t.setDate(this.weekStartDate.getDate()-7),this.weekStartDate=t;const s=new Date(this.weekEndDate);s.setDate(this.weekEndDate.getDate()-7),this.weekEndDate=s,this.loadTeamLeadRoster()}nextWeek(){const t=new Date(this.weekStartDate);t.setDate(this.weekStartDate.getDate()+7),this.weekStartDate=t;const s=new Date(this.weekEndDate);s.setDate(this.weekEndDate.getDate()+7),this.weekEndDate=s,this.loadTeamLeadRoster()}currentWeek(){this.initializeWeek(),this.loadTeamLeadRoster()}static{this.\u0275fac=function(s){return new(s||a)(e.rXU(k.w),e.rXU(u.O),e.rXU(_.u),e.rXU(v.tw))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-team-lead-roster"]],standalone:!0,features:[e.aNF],decls:30,vars:11,consts:[[1,"container-fluid"],[1,"row","mb-4"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-muted","mb-0"],[1,"d-flex","gap-2"],[1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-chevron-left"],[1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-chevron-right"],[1,"row"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],["class","row",4,"ngIf"],["class","text-center text-muted py-5",4,"ngIf"],["class","text-center py-5",4,"ngIf"],[1,"col-md-6"],[1,"text-muted"],["class","text-muted",4,"ngIf"],[1,"mb-3"],[1,"badge","ms-2"],[1,"mt-2"],["class","badge bg-primary me-2 mb-2",4,"ngFor","ngForOf"],["class","badge bg-success me-2 mb-2",4,"ngFor","ngForOf"],["class","mb-3",4,"ngIf"],[1,"card","bg-light"],[1,"row","text-center"],[1,"col-4"],[1,"border-end"],[1,"text-primary","mb-0"],[1,"text-success","mb-0"],[1,"text-warning","mb-0"],[1,"mt-3"],[4,"ngIf"],[1,"badge","bg-primary","me-2","mb-2"],[1,"badge","bg-success","me-2","mb-2"],["class","badge bg-warning me-2 mb-2",4,"ngFor","ngForOf"],[1,"badge","bg-warning","me-2","mb-2"],[1,"text-center","text-muted","py-5"],[1,"bi","bi-person-x","fs-1"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(s,n){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"h2"),e.EFF(6,"Team Lead Roster"),e.k0s(),e.j41(7,"p",4),e.EFF(8,"View your team lead's roster for the week"),e.k0s()(),e.j41(9,"div",5)(10,"button",6),e.bIt("click",function(){return n.previousWeek()}),e.nrm(11,"i",7),e.EFF(12," Previous "),e.k0s(),e.j41(13,"button",8),e.bIt("click",function(){return n.currentWeek()}),e.EFF(14," This Week "),e.k0s(),e.j41(15,"button",6),e.bIt("click",function(){return n.nextWeek()}),e.EFF(16," Next "),e.nrm(17,"i",9),e.k0s()()()()(),e.j41(18,"div",10)(19,"div",2)(20,"div",11)(21,"div",12)(22,"h5",13),e.EFF(23),e.nI1(24,"date"),e.nI1(25,"date"),e.k0s()(),e.j41(26,"div",14),e.DNE(27,b,50,20,"div",15)(28,L,6,0,"div",16)(29,y,6,0,"div",17),e.k0s()()()()()),2&s&&(e.R7$(23),e.Lme("Week of ",e.i5U(24,5,n.weekStartDate,"MMM dd, yyyy")," - ",e.i5U(25,8,n.weekEndDate,"MMM dd, yyyy"),""),e.R7$(4),e.Y8G("ngIf",n.teamLeadRoster),e.R7$(),e.Y8G("ngIf",!n.teamLeadRoster&&!n.loading),e.R7$(),e.Y8G("ngIf",n.loading))},dependencies:[m.MD,m.Sq,m.bT,m.vh],encapsulation:2})}}return a})()}}]);