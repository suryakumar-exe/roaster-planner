"use strict";(self.webpackChunkroaster_planner=self.webpackChunkroaster_planner||[]).push([[987],{8987:(v,l,o)=>{o.r(l),o.d(l,{TeamRostersComponent:()=>R});var m=o(177),e=o(4438),c=o(7474),b=o(4796),u=o(5794);function k(s,a){if(1&s&&(e.j41(0,"span",32),e.EFF(1),e.k0s()),2&s){let t;const r=e.XpG();e.R7$(),e.SpI(" ",null==(t=r.authService.getCurrentUser())?null:t.teamName," Team ")}}function p(s,a){if(1&s&&(e.j41(0,"span",40),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&s){const t=a.$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,t,"EEE")," ")}}function h(s,a){if(1&s&&(e.j41(0,"span",41),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&s){const t=a.$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,t,"EEE")," ")}}function _(s,a){if(1&s&&(e.j41(0,"span",42),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&s){const t=a.$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,t,"EEE")," ")}}function F(s,a){1&s&&(e.j41(0,"span",33),e.EFF(1,"None"),e.k0s())}function E(s,a){if(1&s&&(e.j41(0,"span",33),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&s){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,t.submittedAt,"MMM dd, HH:mm")," ")}}function f(s,a){1&s&&(e.j41(0,"span",33),e.EFF(1,"Not submitted"),e.k0s())}function g(s,a){if(1&s){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"div")(3,"strong"),e.EFF(4),e.k0s(),e.nrm(5,"br"),e.j41(6,"small",33),e.EFF(7),e.k0s()()(),e.j41(8,"td"),e.DNE(9,p,3,4,"span",34),e.k0s(),e.j41(10,"td"),e.DNE(11,h,3,4,"span",35),e.k0s(),e.j41(12,"td"),e.DNE(13,_,3,4,"span",36)(14,F,2,0,"span",37),e.k0s(),e.j41(15,"td"),e.DNE(16,E,3,4,"span",37)(17,f,2,0,"span",37),e.k0s(),e.j41(18,"td")(19,"button",38),e.bIt("click",function(){const n=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.viewMemberRoster(n))}),e.nrm(20,"i",39),e.EFF(21," View Details "),e.k0s()()()}if(2&s){const t=a.$implicit;e.R7$(4),e.JRh(t.userName),e.R7$(3),e.JRh(t.email),e.R7$(2),e.Y8G("ngForOf",t.workFromOfficeDays),e.R7$(2),e.Y8G("ngForOf",t.workFromHomeDays),e.R7$(2),e.Y8G("ngForOf",t.leaveDays),e.R7$(),e.Y8G("ngIf",0===t.leaveDays.length),e.R7$(2),e.Y8G("ngIf",t.submittedAt),e.R7$(),e.Y8G("ngIf",!t.submittedAt)}}function D(s,a){1&s&&(e.j41(0,"div",43),e.nrm(1,"i",25),e.j41(2,"h5",44),e.EFF(3,"No team member rosters found"),e.k0s(),e.j41(4,"p"),e.EFF(5,"No team members have submitted rosters for this week yet."),e.k0s()())}let R=(()=>{class s{constructor(t,r,n){this.rostersService=t,this.authService=r,this.toastr=n,this.teamMemberRosters=[],this.weekStartDate=new Date,this.weekEndDate=new Date,this.initializeWeek()}ngOnInit(){this.loadTeamMemberRosters()}initializeWeek(){const t=new Date,r=t.getDay(),n=t.getDate()-r+(0===r?-6:1);this.weekStartDate=new Date(t.setDate(n)),this.weekEndDate=new Date(this.weekStartDate),this.weekEndDate.setDate(this.weekStartDate.getDate()+6)}loadTeamMemberRosters(){const t=this.weekStartDate.toISOString().split("T")[0],r=this.authService.getCurrentUser();r&&r.teamId?this.rostersService.getRosters().subscribe({next:n=>{const i=Array.isArray(n)?n:n.data||[];this.teamMemberRosters=i.filter(d=>d.weekStartDate===t&&d.userId!==r.id&&"Employee"===d.role&&d.teamId===r.teamId)},error:n=>{console.error("Error loading team member rosters:",n),this.toastr.error("Failed to load team member rosters")}}):this.toastr.error("Team information not found")}get submittedCount(){return this.teamMemberRosters.filter(t=>"Submitted"===t.status).length}get draftCount(){return this.teamMemberRosters.filter(t=>"Draft"===t.status).length}get submissionRate(){return 0===this.teamMemberRosters.length?0:Math.round(this.submittedCount/this.teamMemberRosters.length*100)}viewMemberRoster(t){this.toastr.info(`Viewing ${t.userName}'s roster details`)}previousWeek(){const t=new Date(this.weekStartDate);t.setDate(this.weekStartDate.getDate()-7),this.weekStartDate=t;const r=new Date(this.weekEndDate);r.setDate(this.weekEndDate.getDate()-7),this.weekEndDate=r,this.loadTeamMemberRosters()}nextWeek(){const t=new Date(this.weekStartDate);t.setDate(this.weekStartDate.getDate()+7),this.weekStartDate=t;const r=new Date(this.weekEndDate);r.setDate(this.weekEndDate.getDate()+7),this.weekEndDate=r,this.loadTeamMemberRosters()}currentWeek(){this.initializeWeek(),this.loadTeamMemberRosters()}static{this.\u0275fac=function(r){return new(r||s)(e.rXU(c.w),e.rXU(b.u),e.rXU(u.tw))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-team-rosters"]],standalone:!0,features:[e.aNF],decls:88,vars:15,consts:[[1,"container-fluid"],[1,"row","mb-4"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-muted","mb-0"],[1,"d-flex","gap-2"],[1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-chevron-left"],[1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-chevron-right"],[1,"row"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],["class","badge bg-secondary ms-2",4,"ngIf"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["class","text-center text-muted py-5",4,"ngIf"],[1,"row","mt-4"],[1,"col-md-3"],[1,"card","bg-primary","text-white"],[1,"d-flex","justify-content-between"],[1,"mb-0"],[1,"bi","bi-people","fs-1"],[1,"card","bg-success","text-white"],[1,"bi","bi-check-circle","fs-1"],[1,"card","bg-warning","text-white"],[1,"bi","bi-pencil","fs-1"],[1,"card","bg-info","text-white"],[1,"bi","bi-graph-up","fs-1"],[1,"badge","bg-secondary","ms-2"],[1,"text-muted"],["class","badge bg-primary me-1",4,"ngFor","ngForOf"],["class","badge bg-success me-1",4,"ngFor","ngForOf"],["class","badge bg-warning me-1",4,"ngFor","ngForOf"],["class","text-muted",4,"ngIf"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-eye"],[1,"badge","bg-primary","me-1"],[1,"badge","bg-success","me-1"],[1,"badge","bg-warning","me-1"],[1,"text-center","text-muted","py-5"],[1,"mt-3"]],template:function(r,n){if(1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"h2"),e.EFF(6,"Team Members Rosters"),e.k0s(),e.j41(7,"p",4),e.EFF(8,"View and monitor your team members' roster submissions"),e.k0s()(),e.j41(9,"div",5)(10,"button",6),e.bIt("click",function(){return n.previousWeek()}),e.nrm(11,"i",7),e.EFF(12," Previous "),e.k0s(),e.j41(13,"button",8),e.bIt("click",function(){return n.currentWeek()}),e.EFF(14," This Week "),e.k0s(),e.j41(15,"button",6),e.bIt("click",function(){return n.nextWeek()}),e.EFF(16," Next "),e.nrm(17,"i",9),e.k0s()()()()(),e.j41(18,"div",10)(19,"div",2)(20,"div",11)(21,"div",12)(22,"h5",13),e.EFF(23),e.nI1(24,"date"),e.nI1(25,"date"),e.DNE(26,k,2,1,"span",14),e.k0s()(),e.j41(27,"div",15)(28,"div",16)(29,"table",17)(30,"thead")(31,"tr")(32,"th"),e.EFF(33,"Employee"),e.k0s(),e.j41(34,"th"),e.EFF(35,"WFO Days"),e.k0s(),e.j41(36,"th"),e.EFF(37,"WFH Days"),e.k0s(),e.j41(38,"th"),e.EFF(39,"Leave Days"),e.k0s(),e.j41(40,"th"),e.EFF(41,"Submitted"),e.k0s(),e.j41(42,"th"),e.EFF(43,"Actions"),e.k0s()()(),e.j41(44,"tbody"),e.DNE(45,g,22,8,"tr",18),e.k0s()()(),e.DNE(46,D,6,0,"div",19),e.k0s()()()(),e.j41(47,"div",20)(48,"div",21)(49,"div",22)(50,"div",15)(51,"div",23)(52,"div")(53,"h4",24),e.EFF(54),e.k0s(),e.j41(55,"small"),e.EFF(56,"Total Team Members"),e.k0s()(),e.nrm(57,"i",25),e.k0s()()()(),e.j41(58,"div",21)(59,"div",26)(60,"div",15)(61,"div",23)(62,"div")(63,"h4",24),e.EFF(64),e.k0s(),e.j41(65,"small"),e.EFF(66,"Submitted"),e.k0s()(),e.nrm(67,"i",27),e.k0s()()()(),e.j41(68,"div",21)(69,"div",28)(70,"div",15)(71,"div",23)(72,"div")(73,"h4",24),e.EFF(74),e.k0s(),e.j41(75,"small"),e.EFF(76,"Draft"),e.k0s()(),e.nrm(77,"i",29),e.k0s()()()(),e.j41(78,"div",21)(79,"div",30)(80,"div",15)(81,"div",23)(82,"div")(83,"h4",24),e.EFF(84),e.k0s(),e.j41(85,"small"),e.EFF(86,"Submission Rate"),e.k0s()(),e.nrm(87,"i",31),e.k0s()()()()()()),2&r){let i;e.R7$(23),e.Lme(" Week of ",e.i5U(24,9,n.weekStartDate,"MMM dd, yyyy")," - ",e.i5U(25,12,n.weekEndDate,"MMM dd, yyyy")," "),e.R7$(3),e.Y8G("ngIf",null==(i=n.authService.getCurrentUser())?null:i.teamName),e.R7$(19),e.Y8G("ngForOf",n.teamMemberRosters),e.R7$(),e.Y8G("ngIf",0===n.teamMemberRosters.length),e.R7$(8),e.JRh(n.teamMemberRosters.length),e.R7$(10),e.JRh(n.submittedCount),e.R7$(10),e.JRh(n.draftCount),e.R7$(10),e.SpI("",n.submissionRate,"%")}},dependencies:[m.MD,m.Sq,m.bT,m.vh],encapsulation:2})}}return s})()}}]);